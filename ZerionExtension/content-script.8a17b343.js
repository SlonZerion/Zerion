!function(){function e(e,r,t,n){Object.defineProperty(e,r,{get:t,set:n,enumerable:!0,configurable:!0})}var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{};function t(e){return e&&e.__esModule?e.default:e}var n={},s={},o=r.parcelRequire7f4b;null==o&&((o=function(e){if(e in n)return n[e].exports;if(e in s){var r=s[e];delete s[e];var t={id:e,exports:{}};return n[e]=t,r.call(t.exports,t,t.exports),t.exports}var o=Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,r){s[e]=r},r.parcelRequire7f4b=o);var i=o.register;i("h3xyl",function(r,t){e(r.exports,"nanoid",function(){return n});let n=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((e,r)=>((r&=63)<36?e+=r.toString(36):r<62?e+=(r-26).toString(36).toUpperCase():r>62?e+="-":e+="_",e),"")}),i("kTh4x",function(e,r){var t;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,t=function(e){if(!globalThis.chrome?.runtime?.id)throw Error("This script should only be loaded in a browser extension.");void 0===globalThis.browser||Object.getPrototypeOf(globalThis.browser)!==Object.prototype?e.exports=(e=>{let r={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(0===Object.keys(r).length)throw Error("api-metadata.json has not been included in browser-polyfill");class t extends WeakMap{constructor(e,r){super(r),this.createItem=e}get(e){return this.has(e)||this.set(e,this.createItem(e)),super.get(e)}}let n=e=>e&&"object"==typeof e&&"function"==typeof e.then,s=(r,t)=>(...n)=>{e.runtime.lastError?r.reject(Error(e.runtime.lastError.message)):t.singleCallbackArg||n.length<=1&&!1!==t.singleCallbackArg?r.resolve(n[0]):r.resolve(n)},o=e=>1==e?"argument":"arguments",i=(e,r)=>function(t,...n){if(n.length<r.minArgs)throw Error(`Expected at least ${r.minArgs} ${o(r.minArgs)} for ${e}(), got ${n.length}`);if(n.length>r.maxArgs)throw Error(`Expected at most ${r.maxArgs} ${o(r.maxArgs)} for ${e}(), got ${n.length}`);return new Promise((o,i)=>{if(r.fallbackToNoCallback)try{t[e](...n,s({resolve:o,reject:i},r))}catch(s){console.warn(`${e} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,s),t[e](...n),r.fallbackToNoCallback=!1,r.noCallback=!0,o()}else r.noCallback?(t[e](...n),o()):t[e](...n,s({resolve:o,reject:i},r))})},a=(e,r,t)=>new Proxy(r,{apply:(r,n,s)=>t.call(n,e,...s)}),g=Function.call.bind(Object.prototype.hasOwnProperty),c=(e,r={},t={})=>{let n=Object.create(null),s=Object.create(e);return new Proxy(s,{has:(r,t)=>t in e||t in n,get(s,o,m){if(o in n)return n[o];if(!(o in e))return;let l=e[o];if("function"==typeof l){if("function"==typeof r[o])l=a(e,e[o],r[o]);else if(g(t,o)){let r=i(o,t[o]);l=a(e,e[o],r)}else l=l.bind(e)}else if("object"==typeof l&&null!==l&&(g(r,o)||g(t,o)))l=c(l,r[o],t[o]);else{if(!g(t,"*"))return Object.defineProperty(n,o,{configurable:!0,enumerable:!0,get:()=>e[o],set(r){e[o]=r}}),l;l=c(l,r[o],t["*"])}return n[o]=l,l},set:(r,t,s,o)=>(t in n?n[t]=s:e[t]=s,!0),defineProperty:(e,r,t)=>Reflect.defineProperty(n,r,t),deleteProperty:(e,r)=>Reflect.deleteProperty(n,r)})},m=e=>({addListener(r,t,...n){r.addListener(e.get(t),...n)},hasListener:(r,t)=>r.hasListener(e.get(t)),removeListener(r,t){r.removeListener(e.get(t))}}),l=new t(e=>"function"!=typeof e?e:function(r){e(c(r,{},{getContent:{minArgs:0,maxArgs:0}}))}),u=new t(e=>"function"!=typeof e?e:function(r,t,s){let o,i,a=!1,g=new Promise(e=>{o=function(r){a=!0,e(r)}});try{i=e(r,t,o)}catch(e){i=Promise.reject(e)}let c=!0!==i&&n(i);return(!0===i||!!c||!!a)&&((e=>{e.then(e=>{s(e)},e=>{s({__mozWebExtensionPolyfillReject__:!0,message:e&&(e instanceof Error||"string"==typeof e.message)?e.message:"An unexpected error occurred"})}).catch(e=>{console.error("Failed to send onMessage rejected reply",e)})})(c?i:g),!0)}),A=({reject:r,resolve:t},n)=>{e.runtime.lastError?"The message port closed before a response was received."===e.runtime.lastError.message?t():r(Error(e.runtime.lastError.message)):n&&n.__mozWebExtensionPolyfillReject__?r(Error(n.message)):t(n)},p=(e,r,t,...n)=>{if(n.length<r.minArgs)throw Error(`Expected at least ${r.minArgs} ${o(r.minArgs)} for ${e}(), got ${n.length}`);if(n.length>r.maxArgs)throw Error(`Expected at most ${r.maxArgs} ${o(r.maxArgs)} for ${e}(), got ${n.length}`);return new Promise((e,r)=>{let s=A.bind(null,{resolve:e,reject:r});n.push(s),t.sendMessage(...n)})},d={devtools:{network:{onRequestFinished:m(l)}},runtime:{onMessage:m(u),onMessageExternal:m(u),sendMessage:p.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:p.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},f={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return r.privacy={network:{"*":f},services:{"*":f},websites:{"*":f}},c(e,d,r)})(chrome):e.exports=globalThis.browser},"function"==typeof define&&define.amd?define("webextension-polyfill",["module"],t):t(e)}),i("cETi8",function(r,t){e(r.exports,"STANDARD_ERROR_MAP",function(){return o("jqfWA").STANDARD_ERROR_MAP}),e(r.exports,"formatJsonRpcError",function(){return o("hMMjU").formatJsonRpcError}),e(r.exports,"formatJsonRpcRequest",function(){return o("hMMjU").formatJsonRpcRequest}),e(r.exports,"getBigIntRpcId",function(){return o("hMMjU").getBigIntRpcId}),e(r.exports,"IJsonRpcProvider",function(){return o("hMMjU").IJsonRpcProvider}),e(r.exports,"isJsonRpcError",function(){return o("hMMjU").isJsonRpcError}),e(r.exports,"isJsonRpcPayload",function(){return o("hMMjU").isJsonRpcPayload}),e(r.exports,"isJsonRpcRequest",function(){return o("hMMjU").isJsonRpcRequest}),e(r.exports,"isJsonRpcResponse",function(){return o("hMMjU").isJsonRpcResponse}),e(r.exports,"isJsonRpcResult",function(){return o("hMMjU").isJsonRpcResult}),e(r.exports,"payloadId",function(){return o("hMMjU").payloadId}),e(r.exports,"STANDARD_ERROR_MAP",function(){return o("hMMjU").STANDARD_ERROR_MAP}),e(r.exports,"formatJsonRpcError",function(){return o("cazzP").formatJsonRpcError}),e(r.exports,"formatJsonRpcRequest",function(){return o("cazzP").formatJsonRpcRequest}),e(r.exports,"getBigIntRpcId",function(){return o("cazzP").getBigIntRpcId}),e(r.exports,"payloadId",function(){return o("cazzP").payloadId}),e(r.exports,"IJsonRpcProvider",function(){return o("jG4aq").IJsonRpcProvider}),e(r.exports,"isJsonRpcError",function(){return o("ixNqz").isJsonRpcError}),e(r.exports,"isJsonRpcPayload",function(){return o("ixNqz").isJsonRpcPayload}),e(r.exports,"isJsonRpcRequest",function(){return o("ixNqz").isJsonRpcRequest}),e(r.exports,"isJsonRpcResponse",function(){return o("ixNqz").isJsonRpcResponse}),e(r.exports,"isJsonRpcResult",function(){return o("ixNqz").isJsonRpcResult}),o("jqfWA"),o("02iYr"),o("hn1x6"),o("cazzP"),o("hIfl6"),o("8Opd9"),o("jAVEj"),o("ixNqz")}),i("jqfWA",function(r,t){e(r.exports,"INTERNAL_ERROR",function(){return n}),e(r.exports,"SERVER_ERROR",function(){return s}),e(r.exports,"RESERVED_ERROR_CODES",function(){return o}),e(r.exports,"SERVER_ERROR_CODE_RANGE",function(){return i}),e(r.exports,"STANDARD_ERROR_MAP",function(){return a}),e(r.exports,"DEFAULT_ERROR",function(){return g});let n="INTERNAL_ERROR",s="SERVER_ERROR",o=[-32700,-32600,-32601,-32602,-32603],i=[-32e3,-32099],a={PARSE_ERROR:{code:-32700,message:"Parse error"},INVALID_REQUEST:{code:-32600,message:"Invalid Request"},METHOD_NOT_FOUND:{code:-32601,message:"Method not found"},INVALID_PARAMS:{code:-32602,message:"Invalid params"},[n]:{code:-32603,message:"Internal error"},[s]:{code:-32e3,message:"Server error"}},g=s}),i("02iYr",function(r,t){e(r.exports,"isReservedErrorCode",function(){return s}),e(r.exports,"getError",function(){return i}),e(r.exports,"getErrorByCode",function(){return a});var n=o("jqfWA");function s(e){return(0,n.RESERVED_ERROR_CODES).includes(e)}function i(e){return Object.keys(n.STANDARD_ERROR_MAP).includes(e)?n.STANDARD_ERROR_MAP[e]:n.STANDARD_ERROR_MAP[n.DEFAULT_ERROR]}function a(e){return Object.values(n.STANDARD_ERROR_MAP).find(r=>r.code===e)||n.STANDARD_ERROR_MAP[n.DEFAULT_ERROR]}}),i("hn1x6",function(e,r){var t,n=o("hMMjU");n.isNode,t=e.exports,Object.keys(n).forEach(function(e){"default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}})})}),i("hMMjU",function(e,r){Object.defineProperty(e.exports,"__esModule",{value:!0});var t=o("eNcrM");t.__exportStar(o("392XA"),e.exports),t.__exportStar(o("hTwT2"),e.exports)}),i("eNcrM",function(r,t){e(r.exports,"__exportStar",function(){return n});function n(e,r){for(var t in e)"default"===t||r.hasOwnProperty(t)||(r[t]=e[t])}}),i("392XA",function(e,t){function n(){return(null==r?void 0:r.crypto)||(null==r?void 0:r.msCrypto)||{}}function s(){let e=n();return e.subtle||e.webkitSubtle}Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.isBrowserCryptoAvailable=e.exports.getSubtleCrypto=e.exports.getBrowerCrypto=void 0,e.exports.getBrowerCrypto=n,e.exports.getSubtleCrypto=s,e.exports.isBrowserCryptoAvailable=function(){return!!n()&&!!s()}}),i("hTwT2",function(e,r){var t=o("fW3Z9");function n(){return"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product}function s(){return void 0!==t&&void 0!==t.versions&&void 0!==t.versions.node}Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.isBrowser=e.exports.isNode=e.exports.isReactNative=void 0,e.exports.isReactNative=n,e.exports.isNode=s,e.exports.isBrowser=function(){return!n()&&!s()}}),i("fW3Z9",function(e,r){var t,n,s,o=e.exports={};function i(){throw Error("setTimeout has not been defined")}function a(){throw Error("clearTimeout has not been defined")}function g(e){if(t===setTimeout)return setTimeout(e,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:i}catch(e){t=i}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(e){n=a}}();var c=[],m=!1,l=-1;function u(){m&&s&&(m=!1,s.length?c=s.concat(c):l=-1,c.length&&A())}function A(){if(!m){var e=g(u);m=!0;for(var r=c.length;r;){for(s=c,c=[];++l<r;)s&&s[l].run();l=-1,r=c.length}s=null,m=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(r){try{return n.call(null,e)}catch(r){return n.call(this,e)}}}(e)}}function p(e,r){this.fun=e,this.array=r}function d(){}o.nextTick=function(e){var r=Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)r[t-1]=arguments[t];c.push(new p(e,r)),1!==c.length||m||g(A)},p.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=d,o.addListener=d,o.once=d,o.off=d,o.removeListener=d,o.removeAllListeners=d,o.emit=d,o.prependListener=d,o.prependOnceListener=d,o.listeners=function(e){return[]},o.binding=function(e){throw Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw Error("process.chdir is not supported")},o.umask=function(){return 0}}),i("cazzP",function(r,t){e(r.exports,"payloadId",function(){return i}),e(r.exports,"getBigIntRpcId",function(){return a}),e(r.exports,"formatJsonRpcRequest",function(){return g}),e(r.exports,"formatJsonRpcError",function(){return c});var n=o("02iYr"),s=o("jqfWA");function i(e=3){return Date.now()*Math.pow(10,e)+Math.floor(Math.random()*Math.pow(10,e))}function a(e=6){return BigInt(i(e))}function g(e,r,t){return{id:t||i(),jsonrpc:"2.0",method:e,params:r}}function c(e,r,t){var o;return{id:e,jsonrpc:"2.0",error:void 0===(o=r)?(0,n.getError)(s.INTERNAL_ERROR):("string"==typeof o&&(o=Object.assign(Object.assign({},(0,n.getError)(s.SERVER_ERROR)),{message:o})),void 0!==t&&(o.data=t),(0,n.isReservedErrorCode)(o.code)&&(o=(0,n.getErrorByCode)(o.code)),o)}}}),i("hIfl6",function(e,r){}),i("8Opd9",function(r,t){e(r.exports,"IJsonRpcProvider",function(){return o("jG4aq").IJsonRpcProvider}),o("4oddy")}),i("4oddy",function(r,t){e(r.exports,"IJsonRpcProvider",function(){return o("jG4aq").IJsonRpcProvider}),o("1Ssf3"),o("e8Pfi"),o("jG4aq"),o("4Bt8v")}),i("1Ssf3",function(e,r){}),i("e8Pfi",function(r,t){e(r.exports,"IEvents",function(){return n});class n{}}),i("jG4aq",function(r,t){e(r.exports,"IJsonRpcProvider",function(){return i});var n=o("e8Pfi");class s extends n.IEvents{constructor(){super()}}class i extends s{constructor(e){super()}}}),i("4Bt8v",function(e,r){}),i("jAVEj",function(e,r){}),i("ixNqz",function(r,t){function n(e){return"object"==typeof e&&"id"in e&&"jsonrpc"in e&&"2.0"===e.jsonrpc}function s(e){return n(e)&&"method"in e}function o(e){return n(e)&&(i(e)||a(e))}function i(e){return"result"in e}function a(e){return"error"in e}e(r.exports,"isJsonRpcPayload",function(){return n}),e(r.exports,"isJsonRpcRequest",function(){return s}),e(r.exports,"isJsonRpcResponse",function(){return o}),e(r.exports,"isJsonRpcResult",function(){return i}),e(r.exports,"isJsonRpcError",function(){return a})}),i("ikH7M",function(r,n){e(r.exports,"BackgroundScriptUpdateHandler",function(){return g});var s=o("kTh4x"),i=o("fRY2e");async function a(e,r){return new Promise((t,n)=>{let s=r=>{e.onMessage.removeListener(s),e.onDisconnect.removeListener(n),t(r)};e.onMessage.addListener(s),e.onDisconnect.addListener(n),e.postMessage(r)})}class g{constructor({onActivate:e,onDisconnect:r,onFailedHandshake:n,portName:o="handshake",performHandshake:i=!0}){this.handshakeRetries=2,this.onActivate=e,this.onFailedHandshake=n,this.onDisconnect=r,this.portName=o,this.performHandshake=i,t(s).runtime.onMessage.addListener(e=>{"background-initialized"===e.event&&this.onActivate()})}async handleHandshakeFail(){console.warn("Failed handshake!"),this.onFailedHandshake?.()}async handshake(e){let r=window.crypto.getRandomValues(new Uint32Array(1))[0];return Promise.race([a(e,{syn:r}),(0,i.rejectAfterDelay)(1e3,"sendPortMessage")]).then(e=>{if(!e||e.ack!==r+1)throw Error("Unexpected response")}).catch(e=>{if(this.handshakeRetries-=1,this.handshakeRetries)throw e;this.handleHandshakeFail()})}keepAlive(){let e=t(s).runtime.connect({name:this.portName});e.error||(this.performHandshake&&this.handshake(e).catch(()=>{e.disconnect()}),e.onDisconnect.addListener(()=>{this.onDisconnect?.(),this.keepAlive()}))}}}),i("fRY2e",function(r,t){e(r.exports,"rejectAfterDelay",function(){return n});let n=(e,r)=>new Promise((t,n)=>setTimeout(()=>n(Error(`Request timed out: ${r}`)),e))}),i("2D2Ch",function(r,n){e(r.exports,"PortMessageChannel",function(){return m});var s=o("kTh4x");o("cETi8");var i=o("ixNqz"),a=o("f96Vz"),g=o("bmiZs"),c=o("bflL4");class m{constructor({name:e}){this.pendingRequests=new Map,this.emitter=(0,a.createNanoEvents)(),this.name=e,this.trackPendingRequests()}initialize(){this.port=t(s).runtime.connect({name:this.name}),this.port.onMessage.addListener(e=>{this.emitter.emit("message",e)}),this.emitter.emit("connect")}trackPendingRequests(){this.emitter.on("postMessage",e=>{this.pendingRequests.set(e.id,e)}),this.emitter.on("message",e=>{(0,i.isJsonRpcPayload)(e)&&this.pendingRequests.delete(e.id)}),this.emitter.on("connect",()=>{for(let e of((0,g.invariant)(this.port,"Port must exist immediately after connect event"),this.pendingRequests.values()))this.port.postMessage(e)})}async request(e,r,t){(0,g.invariant)(this.port,`Port not initialized: (${this.name})`);let n=(0,c.formatJsonRpcRequestPatched)(e,r,t);return this.emitter.emit("postMessage",n),this.port.postMessage(n),this.getPromise(n.id)}getPromise(e){return new Promise((r,t)=>{let n=this.emitter.on("message",s=>{(0,i.isJsonRpcPayload)(s)&&(0,i.isJsonRpcResponse)(s)&&s.id===e&&((0,i.isJsonRpcResult)(s)?r(s.result):t(s.error),n())})})}}}),i("f96Vz",function(r,t){e(r.exports,"createNanoEvents",function(){return n});let n=()=>({emit(e,...r){let t=this.events[e]||[];for(let e=0,n=t.length;e<n;e++)t[e](...r)},events:{},on(e,r){return this.events[e]?.push(r)||(this.events[e]=[r]),()=>{this.events[e]=this.events[e]?.filter(e=>r!==e)}}})}),i("bmiZs",function(r,t){e(r.exports,"invariant",function(){return n});function n(e,r){if(!1===e||null==e){if("function"==typeof r)throw r();throw Error(r)}}}),i("bflL4",function(r,t){e(r.exports,"formatJsonRpcRequestPatched",function(){return i}),o("cETi8");var n=o("cazzP"),s=o("lhFOa");function i(e,r,t){let o=t??(0,s.getPayloadId)();return(0,n.formatJsonRpcRequest)(e,r,o)}}),i("lhFOa",function(r,t){e(r.exports,"getPayloadId",function(){return o});let n=1,s=crypto.getRandomValues(new Uint32Array(1))[0];function o(){return s+n++}});var a=o("h3xyl"),g=o("kTh4x");o("cETi8");var c=o("ixNqz"),m=o("ikH7M"),l=o("2D2Ch");let u=(0,a.nanoid)(),A=new BroadcastChannel(u),p=new l.PortMessageChannel({name:`${t(g).runtime.id}/ethereum`});p.initialize(),p.emitter.on("message",function(e){(0,c.isJsonRpcPayload)(e)&&(0,c.isJsonRpcResponse)(e)?A.postMessage(e):null!=e&&"object"==typeof e&&("ethereumEvent"===e.type||"walletEvent"===e.type)?A.postMessage(e):console.log("ignored message")}),new(0,m.BackgroundScriptUpdateHandler)({portName:"content-script/keepAlive",performHandshake:!1,onActivate:()=>{p.initialize()}}).keepAlive(),A.addEventListener("message",async e=>{let{data:r}=e;if((0,c.isJsonRpcRequest)(r))try{await p.request(r.method,r.params,r.id)}catch(e){if(e instanceof Error&&"Extension context invalidated."===e.message)window.location.reload();else throw e}else console.log("not a JsonRpcRequest")});let d=document.createElement("script");d.setAttribute("id","zerion-extension-channel"),d.dataset.walletChannelId=u,d.dataset.walletExtension="true",(document.head||document.documentElement).appendChild(d)}();